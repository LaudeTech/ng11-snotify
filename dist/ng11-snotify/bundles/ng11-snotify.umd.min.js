!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng11-snotify",["exports","@angular/core","rxjs","@angular/common"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self)["ng11-snotify"]={},t.ng.core,t.rxjs,t.ng.common)}(this,(function(t,n,o,e){"use strict";function i(t,n,o,e){var i,s=arguments.length,r=s<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,o):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,n,o,e);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(n,o,r):i(n,o))||r);return s>3&&r&&Object.defineProperty(n,o,r),r}Object.create;Object.create;var s;function r(n,o,e){return o===t.SnotifyStyle.async?{value:function(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t=2===n.length?{title:null,body:n[0],config:null,action:n[1]}:3===n.length?"string"==typeof n[1]?{title:n[1],body:n[0],config:null,action:n[2]}:{title:null,body:n[0],config:n[2],action:n[1]}:{title:n[1],body:n[0],config:n[3],action:n[2]},e.value.apply(this,[t])}}:{value:function(){for(var t,n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return 1===o.length?n={title:null,body:o[0],config:null}:3===o.length?n={title:o[1],body:o[0],config:o[2]}:((t={title:null,config:null,body:o[0]})["string"==typeof o[1]?"title":"config"]=o[1],n=t),e.value.apply(this,[n])}}}function a(t){return t&&"object"==typeof t&&!Array.isArray(t)}function c(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var e={};if(!n.length)return e;for(;n.length>0;){var i=n.shift();if(a(i))for(var s in i)a(i[s])?e[s]=c(e[s],i[s]):Object.assign(e,((t={})[s]=i[s],t))}return e}function f(t,n,o){return{value:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[0].config=Object.assign(Object.assign({},t[0].config),{type:n}),o.value.apply(this,t)}}}(s=t.SnotifyStyle||(t.SnotifyStyle={})).simple="simple",s.success="success",s.error="error",s.warning="warning",s.info="info",s.async="async",s.confirm="confirm",s.prompt="prompt";var l=function(){function n(n,e,i,s){var r=this;this.id=n,this.title=e,this.body=i,this.config=s,this.eventEmitter=new o.Subject,this.eventsHolder=[],this.config.type===t.SnotifyStyle.prompt&&(this.value=""),this.on("hidden",(function(){r.eventsHolder.forEach((function(t){t.unsubscribe()}))}))}return n.prototype.on=function(t,n){var o=this;return this.eventsHolder.push(this.eventEmitter.subscribe((function(e){e===t&&n(o)}))),this},n.prototype.equals=function(t){return this.body===t.body&&this.title===t.title&&this.config.type===t.config.type},n}(),u=function(){function n(t){this.config=t,this.emitter=new o.Subject,this.toastChanged=new o.Subject,this.toastDeleted=new o.Subject,this.notifications=[]}return n.prototype.emit=function(){this.emitter.next(this.notifications.slice())},n.prototype.get=function(t){return this.notifications.find((function(n){return n.id===t}))},n.prototype.add=function(t){this.config.global.filterDuplicates&&this.containsToast(t)||(this.config.global.newOnTop?this.notifications.unshift(t):this.notifications.push(t),this.emit())},n.prototype.containsToast=function(t){return this.notifications.some((function(n){return n.equals(t)}))},n.prototype.remove=function(t,n){return t?n?(this.notifications=this.notifications.filter((function(n){return n.id!==t})),this.emit()):void this.toastDeleted.next(t):this.clear()},n.prototype.clear=function(){this.notifications=[],this.emit()},n.prototype.create=function(t){var n=c(this.config.toast,this.config.type[t.config.type],t.config),o=new l(Math.floor(Math.random()*(Date.now()-1))+1,t.title,t.body,n);return this.add(o),o},n.prototype.setDefaults=function(t){return this.config=c(this.config,t)},n.prototype.simple=function(t){return this.create(t)},n.prototype.success=function(t){return this.create(t)},n.prototype.error=function(t){return this.create(t)},n.prototype.info=function(t){return this.create(t)},n.prototype.warning=function(t){return this.create(t)},n.prototype.confirm=function(t){return this.create(t)},n.prototype.prompt=function(t){return this.create(t)},n.prototype.async=function(n){var e,i=this;e=n.action instanceof Promise?o.from(n.action):n.action;var s=this.create(n);return s.on("mounted",(function(){var n=e.subscribe((function(t){i.mergeToast(s,t)}),(function(o){i.mergeToast(s,o,t.SnotifyStyle.error),n.unsubscribe()}),(function(){i.mergeToast(s,{},t.SnotifyStyle.success),n.unsubscribe()}))})),s},n.prototype.mergeToast=function(t,n,o){n.body&&(t.body=n.body),n.title&&(t.title=n.title),t.config=o?c(t.config,this.config.global,this.config.toast[o],{type:o},n.config):c(t.config,n.config),n.html&&(t.config.html=n.html),this.emit(),this.toastChanged.next(t)},n.prototype.html=function(t,n){return this.create({title:null,body:null,config:Object.assign(Object.assign({},n),{html:t})})},n}();u.decorators=[{type:n.Injectable}],u.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:["SnotifyToastConfig"]}]}]},i([r,f],u.prototype,"simple",null),i([r,f],u.prototype,"success",null),i([r,f],u.prototype,"error",null),i([r,f],u.prototype,"info",null),i([r,f],u.prototype,"warning",null),i([r,f],u.prototype,"confirm",null),i([r,f],u.prototype,"prompt",null),i([r,f],u.prototype,"async",null);var p=function(){function t(t){this.service=t}return t.prototype.remove=function(){this.service.remove(this.toast.id)},t}();p.decorators=[{type:n.Component,args:[{selector:"ng-snotify-button",template:'<div class="snotifyToast__buttons">\n  <button\n    type="button"\n    *ngFor="let button of toast.config.buttons"\n    [ngClass]="{ \'snotifyToast__buttons--bold\': button.bold }"\n    (click)="button.action ? button.action(toast) : remove()"\n  >\n    {{ button.text }}\n  </button>\n</div>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}]}],p.ctorParameters=function(){return[{type:u}]},p.propDecorators={toast:[{type:n.Input}]};var y,g=function(){this.isPromptFocused=!1};g.decorators=[{type:n.Component,args:[{selector:"ng-snotify-prompt",template:'<span class="snotifyToast__input" [ngClass]="{ \'snotifyToast__input--filled\': isPromptFocused }">\n  <input\n    (input)="toast.value = $event.target.value; toast.eventEmitter.next(\'input\')"\n    autofocus\n    class="snotifyToast__input__field"\n    type="text"\n    [id]="toast.id"\n    (focus)="isPromptFocused = true"\n    (blur)="isPromptFocused = !!toast.value.length"\n  />\n  <label class="snotifyToast__input__label" [for]="toast.id">\n    <span class="snotifyToast__input__labelContent">{{ toast.config.placeholder | truncate }}</span>\n  </label>\n</span>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}]}],g.propDecorators={toast:[{type:n.Input}]},(y=t.SnotifyPosition||(t.SnotifyPosition={})).leftTop="leftTop",y.leftCenter="leftCenter",y.leftBottom="leftBottom",y.rightTop="rightTop",y.rightCenter="rightCenter",y.rightBottom="rightBottom",y.centerTop="centerTop",y.centerCenter="centerCenter",y.centerBottom="centerBottom";var h=function(){function n(t){this.service=t,this.backdrop=-1}return n.prototype.ngOnInit=function(){var t=this;this.emitter=this.service.emitter.subscribe((function(n){t.service.config.global.newOnTop?(t.dockSizeA=-t.service.config.global.maxOnScreen,t.dockSizeB=void 0,t.blockSizeA=-t.service.config.global.maxAtPosition,t.blockSizeB=void 0,t.withBackdrop=n.filter((function(t){return t.config.backdrop>=0}))):(t.dockSizeA=0,t.dockSizeB=t.service.config.global.maxOnScreen,t.blockSizeA=0,t.blockSizeB=t.service.config.global.maxAtPosition,t.withBackdrop=n.filter((function(t){return t.config.backdrop>=0})).reverse()),t.notifications=t.splitToasts(n.slice(t.dockSizeA,t.dockSizeB)),t.stateChanged("mounted")}))},n.prototype.stateChanged=function(t){if(this.withBackdrop.length)switch(t){case"mounted":this.backdrop<0&&(this.backdrop=0);break;case"beforeShow":this.backdrop=this.withBackdrop[this.withBackdrop.length-1].config.backdrop;break;case"beforeHide":1===this.withBackdrop.length&&(this.backdrop=0);break;case"hidden":1===this.withBackdrop.length&&(this.backdrop=-1)}else this.backdrop>=0&&(this.backdrop=-1)},n.prototype.splitToasts=function(n){var o={};for(var e in t.SnotifyPosition)t.SnotifyPosition.hasOwnProperty(e)&&(o[t.SnotifyPosition[e]]=[]);return n.forEach((function(t){o[t.config.position].push(t)})),o},n.prototype.ngOnDestroy=function(){this.emitter.unsubscribe()},n}();h.decorators=[{type:n.Component,args:[{selector:"ng-snotify",template:'<div class="snotify-backdrop" *ngIf="backdrop >= 0" [style.opacity]="backdrop"></div>\n<div *ngFor="let position of notifications | keys" class="snotify snotify-{{ position }}">\n  <ng-snotify-toast\n    *ngFor="let notification of notifications[position] | slice: blockSizeA:blockSizeB"\n    [toast]="notification"\n    (stateChanged)="stateChanged($event)"\n  >\n  </ng-snotify-toast>\n</div>\n',encapsulation:n.ViewEncapsulation.None}]}],h.ctorParameters=function(){return[{type:u}]};var m=function(){function o(o){this.service=o,this.stateChanged=new n.EventEmitter,this.state={paused:!1,progress:0,animation:"",isDestroying:!1,promptType:t.SnotifyStyle.prompt}}return o.prototype.ngOnInit=function(){var t=this;this.toastChangedSubscription=this.service.toastChanged.subscribe((function(n){t.toast.id===n.id&&t.initToast()})),this.toastDeletedSubscription=this.service.toastDeleted.subscribe((function(n){t.toast.id===n&&t.onRemove()})),this.toast.config.timeout||(this.toast.config.showProgressBar=!1),this.toast.eventEmitter.next("mounted"),this.state.animation="snotifyToast--in"},o.prototype.ngAfterContentInit=function(){var t=this;setTimeout((function(){t.stateChanged.emit("beforeShow"),t.toast.eventEmitter.next("beforeShow"),t.state.animation=t.toast.config.animation.enter}),this.service.config.toast.animation.time/5)},o.prototype.ngOnDestroy=function(){cancelAnimationFrame(this.animationFrame),this.toast.eventEmitter.next("destroyed"),this.toastChangedSubscription.unsubscribe(),this.toastDeletedSubscription.unsubscribe()},o.prototype.onClick=function(){this.toast.eventEmitter.next("click"),this.toast.config.closeOnClick&&this.service.remove(this.toast.id)},o.prototype.onRemove=function(){var t=this;this.state.isDestroying=!0,this.toast.eventEmitter.next("beforeHide"),this.stateChanged.emit("beforeHide"),this.state.animation=this.toast.config.animation.exit,setTimeout((function(){t.stateChanged.emit("hidden"),t.state.animation="snotifyToast--out",t.toast.eventEmitter.next("hidden"),setTimeout((function(){return t.service.remove(t.toast.id,!0)}),t.toast.config.animation.time/2)}),this.toast.config.animation.time/2)},o.prototype.onMouseEnter=function(){this.toast.eventEmitter.next("mouseenter"),this.toast.config.pauseOnHover&&(this.state.paused=!0)},o.prototype.onMouseLeave=function(){this.toast.config.pauseOnHover&&this.toast.config.timeout&&(this.state.paused=!1,this.startTimeout(this.toast.config.timeout*this.state.progress)),this.toast.eventEmitter.next("mouseleave")},o.prototype.onExitTransitionEnd=function(){this.state.isDestroying||(this.initToast(),this.toast.eventEmitter.next("shown"))},o.prototype.initToast=function(){this.toast.config.timeout>0&&this.startTimeout(0)},o.prototype.startTimeout=function(t){var n=this;void 0===t&&(t=0);var o=performance.now(),e=function(){n.animationFrame=requestAnimationFrame((function(i){var s=i+t-o,r=Math.min(s/n.toast.config.timeout,1);n.state.paused?cancelAnimationFrame(n.animationFrame):s<n.toast.config.timeout?(n.state.progress=r,e()):(n.state.progress=1,cancelAnimationFrame(n.animationFrame),n.service.remove(n.toast.id))}))};e()},o}();m.decorators=[{type:n.Component,args:[{selector:"ng-snotify-toast",template:'<div\n  [attr.role]="toast.config.type === state.promptType ? \'dialog\' : \'alert\'"\n  [attr.aria-labelledby]="\'snotify_\' + toast.id"\n  [attr.aria-modal]="toast.config.type === state.promptType"\n  [ngClass]="[\n    \'snotifyToast animated\',\n    \'snotify-\' + toast.config.type,\n    state.animation,\n    toast.valid === undefined ? \'\' : toast.valid ? \'snotifyToast--valid\' : \'snotifyToast--invalid\'\n  ]"\n  [ngStyle]="{\n    \'-webkit-transition\': toast.config.animation.time + \'ms\',\n    transition: toast.config.animation.time + \'ms\',\n    \'-webkit-animation-duration\': toast.config.animation.time + \'ms\',\n    \'animation-duration\': toast.config.animation.time + \'ms\'\n  }"\n  (animationend)="onExitTransitionEnd()"\n  (click)="onClick()"\n  (mouseenter)="onMouseEnter()"\n  (mouseleave)="onMouseLeave()"\n>\n  <div class="snotifyToast__progressBar" *ngIf="toast.config.showProgressBar">\n    <span class="snotifyToast__progressBar__percentage" [ngStyle]="{ width: state.progress * 100 + \'%\' }"></span>\n  </div>\n  <div class="snotifyToast__inner" *ngIf="!toast.config.html; else toastHTML">\n    <div class="snotifyToast__title" [attr.id]="\'snotify_\' + toast.id" *ngIf="toast.title">\n      {{ toast.title | truncate: toast.config.titleMaxLength }}\n    </div>\n    <div class="snotifyToast__body" *ngIf="toast.body">{{ toast.body | truncate: toast.config.bodyMaxLength }}</div>\n    <ng-snotify-prompt *ngIf="toast.config.type === state.promptType" [toast]="toast"> </ng-snotify-prompt>\n    <div\n      *ngIf="!toast.config.icon; else elseBlock"\n      [ngClass]="[\'snotify-icon\', toast.config.iconClass || \'snotify-icon--\' + toast.config.type]"\n    ></div>\n    <ng-template #elseBlock>\n      <img class="snotify-icon" [src]="toast.config.icon" />\n    </ng-template>\n  </div>\n  <ng-template #toastHTML>\n    <div class="snotifyToast__inner" [innerHTML]="toast.config.html"></div>\n  </ng-template>\n  <ng-snotify-button *ngIf="toast.config.buttons" [toast]="toast"></ng-snotify-button>\n</div>\n',encapsulation:n.ViewEncapsulation.None}]}],m.ctorParameters=function(){return[{type:u}]},m.propDecorators={toast:[{type:n.Input}],stateChanged:[{type:n.Output}]};var d=function(){function t(){}return t.prototype.transform=function(t,n){return void 0===n&&(n=null),t?Object.keys(t):t},t}();d.decorators=[{type:n.Pipe,args:[{name:"keys",pure:!1}]}];var b=function(){function t(){}return t.prototype.transform=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var e=40,i="...";return n.length>0&&(e=n.length>0?parseInt(n[0],10):e,i=n.length>1?n[1]:i),t.length>e?t.substring(0,e)+i:t},t}();b.decorators=[{type:n.Pipe,args:[{name:"truncate"}]}];var v,S=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[u]}},t}();S.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule],declarations:[h,m,b,p,g,d],exports:[h,b,d]}]}];var T={global:{newOnTop:!0,maxOnScreen:8,maxAtPosition:8,filterDuplicates:!1},toast:{type:t.SnotifyStyle.simple,showProgressBar:!0,timeout:2e3,closeOnClick:!0,pauseOnHover:!0,bodyMaxLength:150,titleMaxLength:16,backdrop:-1,icon:null,iconClass:null,html:null,position:t.SnotifyPosition.rightBottom,animation:{enter:"fadeIn",exit:"fadeOut",time:400}},type:(v={},v[t.SnotifyStyle.prompt]={timeout:0,closeOnClick:!1,buttons:[{text:"Ok",action:null,bold:!0},{text:"Cancel",action:null,bold:!1}],placeholder:"Enter answer here...",type:t.SnotifyStyle.prompt},v[t.SnotifyStyle.confirm]={timeout:0,closeOnClick:!1,buttons:[{text:"Ok",action:null,bold:!0},{text:"Cancel",action:null,bold:!1}],type:t.SnotifyStyle.confirm},v[t.SnotifyStyle.simple]={type:t.SnotifyStyle.simple},v[t.SnotifyStyle.success]={type:t.SnotifyStyle.success},v[t.SnotifyStyle.error]={type:t.SnotifyStyle.error},v[t.SnotifyStyle.warning]={type:t.SnotifyStyle.warning},v[t.SnotifyStyle.info]={type:t.SnotifyStyle.info},v[t.SnotifyStyle.async]={pauseOnHover:!1,closeOnClick:!1,timeout:0,showProgressBar:!1,type:t.SnotifyStyle.async},v)};t.ButtonsComponent=p,t.KeysPipe=d,t.PromptComponent=g,t.SnotifyComponent=h,t.SnotifyModule=S,t.SnotifyService=u,t.SnotifyToast=l,t.ToastComponent=m,t.ToastDefaults=T,t.TruncatePipe=b,t.ɵa=h,t.ɵb=u,t.ɵd=r,t.ɵe=f,t.ɵf=m,t.ɵg=b,t.ɵh=p,t.ɵi=g,t.ɵj=d,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng11-snotify.umd.min.js.map